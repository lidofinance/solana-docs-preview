"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9225],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(a),m=o,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||r;return a?n.createElement(f,s(s({ref:t},p),{},{components:a})):n.createElement(f,s({ref:t},p))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<r;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3316:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=a(7462),o=(a(7294),a(3905));const r={title:"process_management",description:"Specification of the process_management.rs module",keywords:["development","developers","lido","specification","intent","process_management","solido","solana"],sidebar_position:10},s="Process Management",i={unversionedId:"development/specification/solido/process_management",id:"development/specification/solido/process_management",title:"process_management",description:"Specification of the process_management.rs module",source:"@site/docs/development/specification/solido/process_management.md",sourceDirName:"development/specification/solido",slug:"/development/specification/solido/process_management",permalink:"/development/specification/solido/process_management",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"process_management",description:"Specification of the process_management.rs module",keywords:["development","developers","lido","specification","intent","process_management","solido","solana"],sidebar_position:10},sidebar:"solidoSidebar",previous:{title:"logic",permalink:"/development/specification/solido/logic"},next:{title:"process",permalink:"/development/specification/solido/processor"}},c={},l=[{value:"Functions",id:"functions",level:2},{value:"process_change_fee_spec",id:"process_change_fee_spec",level:3},{value:"process_add_validator",id:"process_add_validator",level:3},{value:"process_remove_validator",id:"process_remove_validator",level:3},{value:"process_claim_validator_fee",id:"process_claim_validator_fee",level:3},{value:"process_distribute_fees",id:"process_distribute_fees",level:3},{value:"process_add_maintainer",id:"process_add_maintainer",level:3},{value:"process_remove_maintainer",id:"process_remove_maintainer",level:3}],p={toc:l};function u(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"process-management"},"Process Management"),(0,o.kt)("p",null,"Process management contains functionality that changes the state of Solido."),(0,o.kt)("h2",{id:"functions"},"Functions"),(0,o.kt)("h3",{id:"process_change_fee_spec"},"process_change_fee_spec"),(0,o.kt)("p",null,"This function changes the fee spec in the Solido state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_change_fee_spec(\n    program_id: &Pubkey,\n    new_fee_distribution: FeeDistribution,\n    accounts_raw: &[AccountInfo],\n) -> ProgramResult {\n")),(0,o.kt)("p",null,"The function is gated so that only the manager role can call the function successfully. It additionally checks that the developer and treasury accounts passed to the function are stSOL accounts."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: This function can also be used to change the keys associated with the developer and treasury accounts in addition to changing the fee spec.")),(0,o.kt)("h3",{id:"process_add_validator"},"process_add_validator"),(0,o.kt)("p",null,"This function add a validator to the list of validators in the Solido state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_add_validator(program_id: &Pubkey, accounts_raw: &[AccountInfo]) -> ProgramResult {\n")),(0,o.kt)("p",null,"The add validator process is gated so that only the manager role can call the function successfully. It additionally checks that the validator fee account is an stSOL accounts."),(0,o.kt)("h3",{id:"process_remove_validator"},"process_remove_validator"),(0,o.kt)("p",null,"This function remove a validator from the list of validators in the Solido state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_remove_validator(program_id: &Pubkey, accounts_raw: &[AccountInfo]) -> ProgramResult {\n")),(0,o.kt)("p",null,"The remove validator process is gated so that only the manager role can call the function successfully. Additionally, before a validator can be removed, all fees must be claimed.  The function will fail with ",(0,o.kt)("inlineCode",{parentName:"p"},"ValidatorHAsUnclaimedCredit")," ",(0,o.kt)("a",{parentName:"p",href:"/development/specification/solido/error#Errors"},"error"),"  if there are unclaimed fees."),(0,o.kt)("h3",{id:"process_claim_validator_fee"},"process_claim_validator_fee"),(0,o.kt)("p",null,"For a given validator fee account, this function will mint stSOL to the fee account equal to any outstanding fees due. Once minting is complete, the fee amount for the validator is reset to 0."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_claim_validator_fee(\n    program_id: &Pubkey,\n    accounts_raw: &[AccountInfo],\n) -> ProgramResult {\n")),(0,o.kt)("p",null,"This function is ",(0,o.kt)("strong",{parentName:"p"},"not")," gated so anyone can call it successfully."),(0,o.kt)("h3",{id:"process_distribute_fees"},"process_distribute_fees"),(0,o.kt)("p",null,"This function calculates the correct ",(0,o.kt)("a",{parentName:"p",href:"/fees"},"Fee Distribution")," and mints the appropriate stSOL tokens to the treasury and developer accounts.  Once minting is complete, the function sets the validator fees attributable to the validators in the Solido state ready for the ",(0,o.kt)("a",{parentName:"p",href:"/development/specification/solido/process_management#process_claim_validator_fee"},"process_claim_validator_fee")," to be called at a subsequent point in time."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_distribute_fees(program_id: &Pubkey, accounts_raw: &[AccountInfo]) -> ProgramResult {\n")),(0,o.kt)("p",null,"This function is gated so that only the maintainer role can call it successfully."),(0,o.kt)("h3",{id:"process_add_maintainer"},"process_add_maintainer"),(0,o.kt)("p",null,"This function adds a maintainer to the list of maintainers in the Solido state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_add_maintainer(program_id: &Pubkey, accounts_raw: &[AccountInfo]) -> ProgramResult {\n")),(0,o.kt)("p",null,"This function is gated so that only the manager role can call it successfully."),(0,o.kt)("h3",{id:"process_remove_maintainer"},"process_remove_maintainer"),(0,o.kt)("p",null,"This function removes a maintainer from the list of maintainers in the Solido state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn process_remove_maintainer(program_id: &Pubkey, accounts_raw: &[AccountInfo]) -> ProgramResult {\n")),(0,o.kt)("p",null,"This function is gated so that only the manager role can call it successfully."))}u.isMDXComponent=!0}}]);